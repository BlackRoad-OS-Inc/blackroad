name: ðŸš‚ Railway CLI Setup

on:
  workflow_dispatch:

jobs:
  setup:
    runs-on: [self-hosted, gematria]
    env:
      RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
    steps:
      - name: Configure Railway CLI
        run: |
          mkdir -p ~/.config/railway
          cat > ~/.config/railway/config.json << EOF
          {"token": "${RAILWAY_TOKEN}"}
          EOF
          railway whoami && echo "âœ… Railway configured on gematria" || echo "âš ï¸ Check token"
      
      - name: List Railway projects
        run: |
          railway list 2>&1 | head -20
