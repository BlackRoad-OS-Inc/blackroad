<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard — BlackRoad OS</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--g:linear-gradient(135deg,#F5A623 0%,#FF1D6C 38.2%,#9C27B0 61.8%,#2979FF 100%)}
body{background:#000;color:#fff;font-family:-apple-system,sans-serif;padding:1.5rem}
h1{font-size:1.75rem;background:var(--g);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:.25rem}
.subtitle{color:#444;font-size:.85rem;margin-bottom:1.5rem}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem;margin-bottom:1.5rem}
.card{background:#0a0a0a;border:1px solid #1a1a1a;border-radius:12px;padding:1.25rem}
.card h3{font-size:.75rem;text-transform:uppercase;letter-spacing:.1em;color:#444;margin-bottom:.75rem}
.big{font-size:2.25rem;font-weight:800;background:var(--g);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sub{font-size:.75rem;color:#333;margin-top:.25rem}
.services{background:#050505;border:1px solid #111;border-radius:12px;padding:1.25rem;margin-bottom:1rem}
.services h3{font-size:.75rem;text-transform:uppercase;letter-spacing:.1em;color:#444;margin-bottom:1rem}
.svc{display:flex;align-items:center;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #0f0f0f}
.svc:last-child{border-bottom:none}
.svc-name{font-size:.85rem;color:#888}
.up{color:#4ade80}.down{color:#f87171}.deg{color:#fbbf24}
.dot{display:inline-block;width:6px;height:6px;border-radius:50%;margin-right:6px}
.dot.up{background:#4ade80;animation:p 2s infinite}.dot.down{background:#f87171}.dot.deg{background:#fbbf24}
@keyframes p{0%,100%{opacity:1}50%{opacity:.3}}
#last-update{color:#222;font-size:.7rem;text-align:right;margin-top:1rem}
</style>
</head>
<body>
<h1>BlackRoad OS Dashboard</h1>
<p class="subtitle">Live system status · auto-refreshes every 30s</p>
<div class="grid">
<div class="card"><h3>Agents</h3><div class="big" id="agents">30,000</div><div class="sub">fleet-wide</div></div>
<div class="card"><h3>Repositories</h3><div class="big" id="repos">1,825+</div><div class="sub">across 17 orgs</div></div>
<div class="card"><h3>Workers</h3><div class="big" id="workers">75+</div><div class="sub">Cloudflare edge</div></div>
<div class="card"><h3>CLI Tools</h3><div class="big">162</div><div class="sub">br tools</div></div>
<div class="card"><h3>Pi Fleet</h3><div class="big" id="pis">3</div><div class="sub">nodes</div></div>
<div class="card"><h3>Domains</h3><div class="big">20+</div><div class="sub">live</div></div>
</div>
<div class="services">
<h3>Services</h3>
<div id="services-list">Loading...</div>
</div>
<div id="last-update">Fetching live data...</div>
<script>
const SERVICES = [
  {name:'Agents API',url:'https://agents-api.blackroad.workers.dev/health'},
  {name:'Tools API',url:'https://tools-api.blackroad.workers.dev/health'},
  {name:'Command Center',url:'https://command-center.blackroad.workers.dev/health'},
  {name:'Pi Fleet API',url:'https://api.blackroad.io/health'},
  {name:'AI Hub',url:'https://ai.blackroad.io/health'},
];
async function refresh(){
  const list = document.getElementById('services-list');
  list.innerHTML = '';
  for(const s of SERVICES){
    try{
      const r = await fetch(s.url,{signal:AbortSignal.timeout(3000)});
      const cls = r.ok?'up':'deg';
      list.innerHTML += `<div class="svc"><span class="svc-name"><span class="dot ${cls}"></span>${s.name}</span><span class="${cls}">${r.ok?'operational':'degraded'}</span></div>`;
    }catch{
      list.innerHTML += `<div class="svc"><span class="svc-name"><span class="dot down"></span>${s.name}</span><span class="down">offline</span></div>`;
    }
  }
  // Fetch command center stats
  try{
    const r = await fetch('https://command-center.blackroad.workers.dev/');
    const d = await r.json();
    if(d.system){
      document.getElementById('agents').textContent=d.system.agents?.toLocaleString()||'30,000';
      document.getElementById('workers').textContent=d.system.domains||'75+';
    }
  }catch{}
  document.getElementById('last-update').textContent = 'Last updated: '+new Date().toUTCString();
}
refresh();
setInterval(refresh,30000);
</script>
</body>
</html>
